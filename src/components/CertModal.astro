---
import Cert1 from '../images/CertFirst.jpg';
import Cert2 from '../images/CertSecond.jpg';
---

<div 
  x-data="{ activeSlide: 0 }"
  x-show="$store.modals.cert" 
  @keydown.escape.window="$store.modals.cert = false"
  class="fixed inset-0 z-50 flex items-center justify-center"
  x-cloak
  x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="opacity-0"
  x-transition:enter-end="opacity-100"
  x-transition:leave="transition ease-in duration-200"
  x-transition:leave-start="opacity-100"
  x-transition:leave-end="opacity-0"
>
  <!-- Затемненный фон -->
  <div 
    class="fixed inset-0 bg-black/70" 
    @click="$store.modals.cert = false"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
  ></div>
  
  <!-- Контент модалки -->
  <div 
    class="relative z-10 max-w-4xl mx-auto bg-white rounded shadow-xl overflow-hidden"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0 scale-95"
    x-transition:enter-end="opacity-100 scale-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100 scale-100"
    x-transition:leave-end="opacity-0 scale-95"
  >
    <!-- Кнопки управления -->
    <button 
      class="absolute top-1/2 left-4 -translate-y-1/2 bg-white/80 p-2 rounded-full hover:bg-neutral-100 z-20 flex items-center justify-center"
      @click.prevent.stop="activeSlide = activeSlide === 0 ? 2 : activeSlide - 1"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-indigo-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </button>
    
    <button 
      class="absolute top-1/2 right-4 -translate-y-1/2 bg-white/80 p-2 rounded-full hover:bg-neutral-100 z-20 flex items-center justify-center"
      @click.prevent.stop="activeSlide = activeSlide === 1 ? 0 : activeSlide + 1"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-indigo-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>
    
    <!-- Слайдер -->
    <div class="w-full h-[80vh] relative overflow-hidden">
      <div 
        class="flex h-full transition-transform duration-300 ease-in-out" 
        :style="`transform: translateX(-${activeSlide * 100}%)`"
      >
        <div class="w-full h-full flex-shrink-0 flex items-center justify-center bg-neutral-50 p-4">
          <img src={Cert1.src} alt="Сертификат 1" class="max-w-full max-h-full object-contain">
        </div>
        <div class="w-full h-full flex-shrink-0 flex items-center justify-center bg-neutral-50 p-4">
          <img src={Cert2.src} alt="Сертификат 2" class="max-w-full max-h-full object-contain">
        </div>
      </div>
    </div>
    
    <!-- Индикаторы -->
    <div class="absolute bottom-4 left-0 right-0 flex justify-center space-x-2">
      <button 
        @click="activeSlide = 0" 
        class="w-3 h-3 rounded-full"
        :class="activeSlide === 0 ? 'bg-indigo-600' : 'bg-neutral-300'"
      ></button>
      <button 
        @click="activeSlide = 1" 
        class="w-3 h-3 rounded-full"
        :class="activeSlide === 1 ? 'bg-indigo-600' : 'bg-neutral-300'"
      ></button>
    </div>
    
    <!-- Кнопка закрытия -->
    <button 
      class="absolute top-4 right-4 text-neutral-600 hover:text-neutral-800 bg-white/80 p-2 rounded-full"
      @click="$store.modals.cert = false"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>
</div>

<style>
  [x-cloak] { display: none !important; }
</style>